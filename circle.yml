general:
  build_dir: jobqueue
dependencies:
  pre:
    - echo y | android update sdk --no-ui --all --filter "tools,platform-tools,android-23"
    - echo y | android update sdk --no-ui --all --filter "build-tools-23.0.2"
test:
  override:
    - ./gradlew check
  post:
    # copy the build outputs to artifacts
    - cp -r jobqueue/build/outputs $CIRCLE_ARTIFACTS
    # copy the test results to the test results directory.
    - cp -r jobqueue/build/outputs/androidTest-results/* $CIRCLE_TEST_REPORTS
    # - mkdir -p $CIRCLE_TEST_REPORTS/junit-debug/
    # - find . -type f -regex ".*/test-results/debug/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit-debug/ \;
    # - mkdir -p $CIRCLE_TEST_REPORTS/junit-release/
    # - find . -type f -regex ".*/test-results/release/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit-release/ \;